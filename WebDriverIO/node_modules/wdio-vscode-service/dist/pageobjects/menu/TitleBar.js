var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { PageDecorator } from '../utils.js';
import { WindowControls, ContextMenu } from '../index.js';
import { Menu } from './Menu.js';
import { MenuItem } from './MenuItem.js';
import { TitleBar as TitleBarLocators } from '../../locators/1.73.0.js';
/**
 * Page object representing the custom VSCode title bar
 *
 * @category Menu
 */
let TitleBar = class TitleBar extends Menu {
    constructor() {
        super(...arguments);
        /**
         * @private
         */
        this.locatorKey = 'TitleBar';
    }
    /**
     * Get title bar item by name
     * @param name name of the item to search by
     * @returns Promise resolving to TitleBarItem object
     */
    async getItem(name) {
        try {
            const titleBar = new TitleBarItem(this.locatorMap, this.locators.itemConstructor(name), this);
            await titleBar.wait();
            return titleBar;
        }
        catch (err) {
            return undefined;
        }
    }
    /**
     * Get all title bar items
     * @returns Promise resolving to array of TitleBarItem objects
     */
    async getItems() {
        const items = [];
        const elements = await this.itemElement$$;
        for (const element of elements) {
            const isDisplayed = await element.isDisplayed();
            if (!isDisplayed) {
                continue;
            }
            const item = new TitleBarItem(this.locatorMap, await element.getAttribute(this.locators.itemLabel), this);
            await item.wait();
            items.push(item);
        }
        return items;
    }
    /**
     * Get the window title
     * @returns Promise resolving to the window title
     */
    async getTitle() {
        const title = await this.title$.getText();
        /**
         * when testing VSCode on the web the element is not
         * visible and the text will be "", therefor we need
         * to fetch the HTML
         */
        if (title.length === 0) {
            return this.title$.getHTML(false);
        }
        return title;
    }
    /**
     * Get a reference to the WindowControls
     */
    getWindowControls() {
        return new WindowControls(this.locatorMap, this.elem);
    }
};
TitleBar = __decorate([
    PageDecorator(TitleBarLocators)
], TitleBar);
export { TitleBar };
/**
 * Page object representing an item of the custom VSCode title bar
 *
 * @category Menu
 */
let TitleBarItem = class TitleBarItem extends MenuItem {
    constructor(locators, label, parentMenu) {
        super(locators, locators.TitleBar.itemConstructor(label));
        this.label = label;
        this.parentMenu = parentMenu;
        /**
         * @private
         */
        this.locatorKey = 'TitleBar';
        this.parentMenu = parentMenu;
        this.label = label;
    }
    async select() {
        const openMenus = await browser.$$(this.locatorMap.ContextMenu.elem);
        if (openMenus.length > 0 && await openMenus[0].isDisplayed()) {
            await browser.keys('Escape');
        }
        await this.elem.click();
        const menu = new ContextMenu(this.locatorMap, this.elem);
        await menu.wait();
        return menu;
    }
};
TitleBarItem = __decorate([
    PageDecorator(TitleBarLocators)
], TitleBarItem);
export { TitleBarItem };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGl0bGVCYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFnZW9iamVjdHMvbWVudS9UaXRsZUJhci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUUsYUFBYSxFQUFvQyxNQUFNLGFBQWEsQ0FBQTtBQUM3RSxPQUFPLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQ2hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDeEMsT0FBTyxFQUFFLFFBQVEsSUFBSSxnQkFBZ0IsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBR3ZFOzs7O0dBSUc7QUFFSCxJQUFhLFFBQVEsR0FBckIsTUFBYSxRQUFTLFNBQVEsSUFBNkI7SUFBM0Q7O1FBQ0k7O1dBRUc7UUFDSSxlQUFVLEdBQUcsVUFBbUIsQ0FBQTtJQXVFM0MsQ0FBQztJQXJFRzs7OztPQUlHO0lBQ0gsS0FBSyxDQUFDLE9BQU8sQ0FBRSxJQUFZO1FBQ3ZCLElBQUk7WUFDQSxNQUFNLFFBQVEsR0FBRyxJQUFJLFlBQVksQ0FDN0IsSUFBSSxDQUFDLFVBQVUsRUFDZixJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFDbkMsSUFBSSxDQUNQLENBQUE7WUFDRCxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtZQUNyQixPQUFPLFFBQVEsQ0FBQTtTQUNsQjtRQUFDLE9BQU8sR0FBRyxFQUFFO1lBQ1YsT0FBTyxTQUFTLENBQUE7U0FDbkI7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLFFBQVE7UUFDVixNQUFNLEtBQUssR0FBbUIsRUFBRSxDQUFBO1FBQ2hDLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQTtRQUV6QyxLQUFLLE1BQU0sT0FBTyxJQUFJLFFBQVEsRUFBRTtZQUM1QixNQUFNLFdBQVcsR0FBRyxNQUFNLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMvQyxJQUFJLENBQUMsV0FBVyxFQUFFO2dCQUNkLFNBQVE7YUFDWDtZQUVELE1BQU0sSUFBSSxHQUFHLElBQUksWUFBWSxDQUN6QixJQUFJLENBQUMsVUFBVSxFQUNmLE1BQU0sT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUNuRCxJQUFJLENBQ1AsQ0FBQTtZQUNELE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ2pCLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDbkI7UUFDRCxPQUFPLEtBQUssQ0FBQTtJQUNoQixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLFFBQVE7UUFDVixNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUE7UUFFekM7Ozs7V0FJRztRQUNILElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDcEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtTQUNwQztRQUVELE9BQU8sS0FBSyxDQUFBO0lBQ2hCLENBQUM7SUFFRDs7T0FFRztJQUNILGlCQUFpQjtRQUNiLE9BQU8sSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDekQsQ0FBQztDQUNKLENBQUE7QUEzRVksUUFBUTtJQURwQixhQUFhLENBQUMsZ0JBQWdCLENBQUM7R0FDbkIsUUFBUSxDQTJFcEI7U0EzRVksUUFBUTtBQThFckI7Ozs7R0FJRztBQUVILElBQWEsWUFBWSxHQUF6QixNQUFhLFlBQWEsU0FBUSxRQUFpQztJQU0vRCxZQUNJLFFBQTBCLEVBQ25CLEtBQWEsRUFDYixVQUF5QztRQUVoRCxLQUFLLENBQUMsUUFBUSxFQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsZUFBNEIsQ0FBQyxLQUFLLENBQVcsQ0FBQyxDQUFBO1FBSDFFLFVBQUssR0FBTCxLQUFLLENBQVE7UUFDYixlQUFVLEdBQVYsVUFBVSxDQUErQjtRQVJwRDs7V0FFRztRQUNJLGVBQVUsR0FBRyxVQUFtQixDQUFBO1FBUW5DLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxLQUFLLENBQUMsTUFBTTtRQUNSLE1BQU0sU0FBUyxHQUFHLE1BQU0sT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFjLENBQUMsQ0FBQTtRQUM5RSxJQUFJLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLE1BQU0sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFO1lBQzFELE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtTQUMvQjtRQUNELE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUV2QixNQUFNLElBQUksR0FBRyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN4RCxNQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUNqQixPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7Q0FDSixDQUFBO0FBM0JZLFlBQVk7SUFEeEIsYUFBYSxDQUFDLGdCQUFnQixDQUFDO0dBQ25CLFlBQVksQ0EyQnhCO1NBM0JZLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlRGVjb3JhdG9yLCBJUGFnZURlY29yYXRvciwgVlNDb2RlTG9jYXRvck1hcCB9IGZyb20gJy4uL3V0aWxzLmpzJ1xuaW1wb3J0IHsgV2luZG93Q29udHJvbHMsIENvbnRleHRNZW51IH0gZnJvbSAnLi4vaW5kZXguanMnXG5pbXBvcnQgeyBNZW51IH0gZnJvbSAnLi9NZW51LmpzJ1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tICcuL01lbnVJdGVtLmpzJ1xuaW1wb3J0IHsgVGl0bGVCYXIgYXMgVGl0bGVCYXJMb2NhdG9ycyB9IGZyb20gJy4uLy4uL2xvY2F0b3JzLzEuNzMuMC5qcydcblxuZXhwb3J0IGludGVyZmFjZSBUaXRsZUJhciBleHRlbmRzIElQYWdlRGVjb3JhdG9yPHR5cGVvZiBUaXRsZUJhckxvY2F0b3JzPiB7fVxuLyoqXG4gKiBQYWdlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1c3RvbSBWU0NvZGUgdGl0bGUgYmFyXG4gKlxuICogQGNhdGVnb3J5IE1lbnVcbiAqL1xuQFBhZ2VEZWNvcmF0b3IoVGl0bGVCYXJMb2NhdG9ycylcbmV4cG9ydCBjbGFzcyBUaXRsZUJhciBleHRlbmRzIE1lbnU8dHlwZW9mIFRpdGxlQmFyTG9jYXRvcnM+IHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBsb2NhdG9yS2V5ID0gJ1RpdGxlQmFyJyBhcyBjb25zdFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRpdGxlIGJhciBpdGVtIGJ5IG5hbWVcbiAgICAgKiBAcGFyYW0gbmFtZSBuYW1lIG9mIHRoZSBpdGVtIHRvIHNlYXJjaCBieVxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIFRpdGxlQmFySXRlbSBvYmplY3RcbiAgICAgKi9cbiAgICBhc3luYyBnZXRJdGVtIChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFRpdGxlQmFySXRlbSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGl0bGVCYXIgPSBuZXcgVGl0bGVCYXJJdGVtKFxuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRvck1hcCxcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0b3JzLml0ZW1Db25zdHJ1Y3RvcihuYW1lKSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBhd2FpdCB0aXRsZUJhci53YWl0KClcbiAgICAgICAgICAgIHJldHVybiB0aXRsZUJhclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgdGl0bGUgYmFyIGl0ZW1zXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gYXJyYXkgb2YgVGl0bGVCYXJJdGVtIG9iamVjdHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRJdGVtcyAoKTogUHJvbWlzZTxUaXRsZUJhckl0ZW1bXT4ge1xuICAgICAgICBjb25zdCBpdGVtczogVGl0bGVCYXJJdGVtW10gPSBbXVxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGF3YWl0IHRoaXMuaXRlbUVsZW1lbnQkJFxuXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgaXNEaXNwbGF5ZWQgPSBhd2FpdCBlbGVtZW50LmlzRGlzcGxheWVkKClcbiAgICAgICAgICAgIGlmICghaXNEaXNwbGF5ZWQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gbmV3IFRpdGxlQmFySXRlbShcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0b3JNYXAsXG4gICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5sb2NhdG9ycy5pdGVtTGFiZWwpLFxuICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0ud2FpdCgpXG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3aW5kb3cgdGl0bGVcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0aGUgd2luZG93IHRpdGxlXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VGl0bGUgKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gYXdhaXQgdGhpcy50aXRsZSQuZ2V0VGV4dCgpXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdoZW4gdGVzdGluZyBWU0NvZGUgb24gdGhlIHdlYiB0aGUgZWxlbWVudCBpcyBub3RcbiAgICAgICAgICogdmlzaWJsZSBhbmQgdGhlIHRleHQgd2lsbCBiZSBcIlwiLCB0aGVyZWZvciB3ZSBuZWVkXG4gICAgICAgICAqIHRvIGZldGNoIHRoZSBIVE1MXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGl0bGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aXRsZSQuZ2V0SFRNTChmYWxzZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aXRsZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgV2luZG93Q29udHJvbHNcbiAgICAgKi9cbiAgICBnZXRXaW5kb3dDb250cm9scyAoKTogV2luZG93Q29udHJvbHMge1xuICAgICAgICByZXR1cm4gbmV3IFdpbmRvd0NvbnRyb2xzKHRoaXMubG9jYXRvck1hcCwgdGhpcy5lbGVtKVxuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaXRsZUJhckl0ZW0gZXh0ZW5kcyBJUGFnZURlY29yYXRvcjx0eXBlb2YgVGl0bGVCYXJMb2NhdG9ycz4ge31cbi8qKlxuICogUGFnZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGl0ZW0gb2YgdGhlIGN1c3RvbSBWU0NvZGUgdGl0bGUgYmFyXG4gKlxuICogQGNhdGVnb3J5IE1lbnVcbiAqL1xuQFBhZ2VEZWNvcmF0b3IoVGl0bGVCYXJMb2NhdG9ycylcbmV4cG9ydCBjbGFzcyBUaXRsZUJhckl0ZW0gZXh0ZW5kcyBNZW51SXRlbTx0eXBlb2YgVGl0bGVCYXJMb2NhdG9ycz4ge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHVibGljIGxvY2F0b3JLZXkgPSAnVGl0bGVCYXInIGFzIGNvbnN0XG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIGxvY2F0b3JzOiBWU0NvZGVMb2NhdG9yTWFwLFxuICAgICAgICBwdWJsaWMgbGFiZWw6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHBhcmVudE1lbnU6IE1lbnU8dHlwZW9mIFRpdGxlQmFyTG9jYXRvcnM+XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGxvY2F0b3JzLCAobG9jYXRvcnMuVGl0bGVCYXIuaXRlbUNvbnN0cnVjdG9yIGFzIEZ1bmN0aW9uKShsYWJlbCkgYXMgc3RyaW5nKVxuICAgICAgICB0aGlzLnBhcmVudE1lbnUgPSBwYXJlbnRNZW51XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbFxuICAgIH1cblxuICAgIGFzeW5jIHNlbGVjdCAoKSB7XG4gICAgICAgIGNvbnN0IG9wZW5NZW51cyA9IGF3YWl0IGJyb3dzZXIuJCQodGhpcy5sb2NhdG9yTWFwLkNvbnRleHRNZW51LmVsZW0gYXMgc3RyaW5nKVxuICAgICAgICBpZiAob3Blbk1lbnVzLmxlbmd0aCA+IDAgJiYgYXdhaXQgb3Blbk1lbnVzWzBdLmlzRGlzcGxheWVkKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIua2V5cygnRXNjYXBlJylcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmVsZW0uY2xpY2soKVxuXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgQ29udGV4dE1lbnUodGhpcy5sb2NhdG9yTWFwLCB0aGlzLmVsZW0pXG4gICAgICAgIGF3YWl0IG1lbnUud2FpdCgpXG4gICAgICAgIHJldHVybiBtZW51XG4gICAgfVxufVxuIl19